datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Recommendation {
  userId    String
  type      String
  createdAt DateTime  @default(now())
  foodIds   String

  @@id([userId, type])
}

model Favorite {
  userId String
  foodId String

  @@unique([userId, foodId])
}

model FoodInfo {
  id          String   @id @default(cuid())
  name        String   @unique
  servingSize String?
  ingredients String?
  allergens   String?
  preferences String?
  calories    Int?
  caloriesFat Int?
  totalFat    Int?
  saturatedFat Int?
  transFat    Int?
  polyFat     Int?
  monoFat     Int?
  cholesterol Int?
  sodium      Int?
  potassium   Int?
  totalCarbohydrates Int?
  fiber       Int?
  sugars      Int?
  protein     Int?
  calciumDV   Int?
  ironDV      Int?

  MealDetails MealDetails[]
}

model User {
  id          String   @id @default(cuid())
  email       String   @unique
  name        String?
  isNew       Boolean?
  preferences String?
  allergies   String?
  locations   String?
  goal        String?
}

model MealDetails {
  id            String  @id @default(cuid())
  diningHall    String?
  diningFacility String?
  mealType      String?
  dateServed    DateTime?
  foodId        String

  foodInfo      FoodInfo  @relation(fields: [foodId], references: [id])

  @@index([foodId])
}
